## 怎样对接嵌入式设备的音频？

嵌入式测试程序原理说明：

因为嵌入式设备各种音频采集和播放的接口都不统一，我们没有办法直接从音频输入设备采集音频以及将音频直接播放到音频输出设备。所以我们开放了一些接口支持客户通过编程来对接音频输入输出设备。

同时在SDK压缩包中给出了一个演示程序。

演示程序音频部分的做法是，接到播放端传过来音频后，将音频数据再传入中间件的音频采集接口。

这样就可以在播放端测试音频数据是否能够正常的传输到了设备端，并且成功的从设备端传回播放端。

设备端采集视频的Demo演示的原理是循环的读取一帧视频数据测试视频数据能不能正常的从设备端传送到播放端并成功播放。

所以我们的对接视音频的时候需要做的就是修改hardware_api.c 文件，将从P2P中间件接收到的音频数据调用**设备的**音频输出接口直接播放。同时要启动设备的音频采集，将采集到的音频数据通过调用**P2P中间件的**音频输入接口输入到**P2P中间件**。

同时需要注意的是设备采集音频的**采样率**以及设备支持播放音频的**采样率**。中间件只支持 采样率为 **11025** 的音频数据的传输。如果设备不支持这种采样率的音频数据的采集和播放，那么就需要了解一下 **pgLibDevAudioConvert.h** 中的API接口，将其他采样率的音频转化成11025采样率，或者将11025采样的的音频转化成其他采样率。